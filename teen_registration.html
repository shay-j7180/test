<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Youth Registration</title>
    <link rel="stylesheet" href="ageform.css">
    <style>
        .hidden { display: none; }
        .emergency-contact-section {
            border: 2px solid #d32f2f;
            border-radius: 10px;
            padding: 16px;
            margin: 18px 0;
            background: rgba(255,255,255,0.98);
        }
        .emergency-contact-section legend {
            color: #d32f2f;
            font-weight: 700;
            padding: 0 8px;
        }
    </style>
</head>
<body>
    <h1>Youth Registration</h1>
    <p>Teens aged 13-19 are welcome to stay in the dorms or on the grounds with a parent/guardian.</p>
    <form id="teenForm">
        <label for="firstName">First Name
            <input type="text" id="firstName" name="firstName" readonly>
        </label><br>
        <label for="lastName">Last Name
            <input type="text" id="lastName" name="lastName" readonly>
        </label><br>
        <label for="dob">Date of Birth
            <input type="date" id="dob" name="dob" readonly>
        </label><br>
        <label for="parentName">Parent/Guardian Name
            <input type="text" id="parentName" name="parentName" required>
        </label><br>

        <label for="allergies">Do you have any allergies?
            <select id="allergies" name="allergies" required>
                <option value="">Select</option>
                <option value="no">No</option>
                <option value="yes">Yes</option>
            </select>
        </label><br>
        <div id="allergyDetailsDiv" class="hidden">
            <label for="allergyDetails">Please specify
                <input type="text" id="allergyDetails" name="allergyDetails">
            </label><br>
        </div>

        <label for="stayingwhereSelect">Where will you be staying?
            <select id="stayingwhereSelect" name="stayingwhereSelect" required>
                <option value="">Select</option>
                <option value="girlsDorm">Girls Dorm</option>
                <option value="boysDorm">Boys Dorm</option>
                <option value="withadult">On the grounds with an adult</option>
            </select>
        </label><br>
        <div id="stayingWithDiv" class="hidden">
            <label for="stayingWith">Who will you be staying with?
                <input type="text" id="stayingWith" name="stayingWith">
            </label><br>
        </div>

               <fieldset class="emergency-contact-section">
            <legend>Emergency Contact</legend>
            <label for="emergencyContactName">Name
                <input type="text" id="emergencyContactName" name="emergencyContactName" required>
            </label><br>
            <label for="emergencyContactPhone">Phone
                <input type="tel" id="emergencyContactPhone" name="emergencyContactPhone" required>
            </label>
            <label for="emergencyContactEmail">Email
                <input type="email" id="emergencyContactEmail" name="emergencyContactEmail" required>
        </fieldset>

        <button type="submit">Next</button>
    </form>
    <script>
        // Pre-fill fields from localStorage
        document.getElementById('firstName').value = localStorage.getItem('firstName') || '';
        document.getElementById('lastName').value = localStorage.getItem('lastName') || '';
        document.getElementById('dob').value = localStorage.getItem('dob') || '';

        // Show/hide allergy details field
        const allergiesSelect = document.getElementById('allergies');
        const allergyDetailsDiv = document.getElementById('allergyDetailsDiv');
        allergiesSelect.addEventListener('change', function () {
            if (this.value === 'yes') {
                allergyDetailsDiv.classList.remove('hidden');
                document.getElementById('allergyDetails').required = true;
            } else {
                allergyDetailsDiv.classList.add('hidden');
                document.getElementById('allergyDetails').required = false;
                document.getElementById('allergyDetails').value = '';
            }
        });

        // Show/hide "Who will you be staying with" field
        const stayingPlaceSelect = document.getElementById('stayingwhereSelect');
        const stayingWithDiv = document.getElementById('stayingWithDiv');
        stayingPlaceSelect.addEventListener('change', function () {
            if (this.value === 'withadult') {
                stayingWithDiv.classList.remove('hidden');
                document.getElementById('stayingWith').required = true;
            } else {
                stayingWithDiv.classList.add('hidden');
                document.getElementById('stayingWith').required = false;
                document.getElementById('stayingWith').value = '';
            }
        });

        // Handle form submission
        document.getElementById('teenForm').addEventListener('submit', function(e){
            e.preventDefault();
            localStorage.setItem('parentName', this.parentName.value.trim());
            localStorage.setItem('emergencyContactName', this.emergencyContactName.value.trim());
            localStorage.setItem('emergencyContactPhone', this.emergencyContactPhone.value.trim());
            localStorage.setItem('emergencyContactEmail', this.emergencyContactEmail.value.trim());
            localStorage.setItem('allergies', this.allergies.value);
            localStorage.setItem('allergyDetails', this.allergyDetails.value.trim());
            localStorage.setItem('stayingPlace', this.stayingwhereSelect.value);
            localStorage.setItem('stayingWith', this.stayingWith.value.trim());

            // Redirect to policies form
            window.location.href = 'policies.html';
        });
    </script>
</body>
</html>